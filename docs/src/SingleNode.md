# Local Single Node Setup

- Single node setup allows for local classification of I/O requests
- no server or database required
- no changes to the binary or workflow are required

## Creating a performance model
- TODO THIS CAN ALSO BE USED FOR THE GLOBAL DOCS
- After compiling, the performance model can be generated by just running `blackheap`
- One should run the benchmarks on the same partition / device as the program which one wants to analyze
  obviously in order to match the characteristics
  This can be specified via the `--file` parameter, see `blackheap --help` for more

## Analyzing the created model
- Afterwards, a model folder will be created.
  - The default path is `$PWD/default-model`, changable via `--to`

- In this folder, the single file web-frontend is contained named `index.html`.
- This can be viewed on any device with any modern browser, no webserver required
- After loading the local `Model.json`, the data gets plotted for manual analysis

## Using the created model locally
- It is possible to locally measure any I/O requests.
- For this, we use ["The `LD_PRELOAD` trick"](http://www.goldsborough.me/c/low-level/kernel/2016/08/29/16-48-53-the_-ld_preload-_trick/).
  - Cite [man page](https://www.man7.org/linux/man-pages/man8/ld.so.8.html)
- The preloadee can be found under `./preloadee`
- It can be built via `make`
- Afterwards, in order to start the program, run it with the preloadee `.so` injected, i.e.
  `LD_PRELOAD=./build/preloadee.so /path/to/my/program`
- This will produce an CSV file in the cwd
  - TODO link to the link format
- This file can then be analyzed locally via the aforementioned web-frontend
- TODO: Add some screenshots
